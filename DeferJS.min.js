window.deferJs||window.jQuery&&jQuery.defer||function(h,r){var a,b=h.document,t=b.createElement("a"),k,c,n,i,f,e={},o=[],j,m="then done fail isResolved isRejected promise".split(" "),u=Array.prototype.slice;if(h.jQuery){a=jQuery;a(function(){f.resolveWith(b,[a])})}else{h.deferJs=h.$=a=function(a){return f.done(a)};a.extend=function(c,b){if(b===r){b=c;c=a}for(var d in b)c[d]=b[d];return c};a.extend({readyWait:1,ready:function(c){if(c===true)a.readyWait--;(!a.readyWait||c!==true&&!a.isReady)&&f.resolveWith(b,[a])},isFunction:function(a){return typeof a==="function"},_Deferred:function(){var d=[],b,e,f,c={done:function(){if(!f){var j=arguments,h,i,e,k,g;if(b){g=b;b=0}for(h=0,i=j.length;h<i;h++){e=j[h];if(e instanceof Array)c.done.apply(c,e);else a.isFunction(e)&&d.push(e)}g&&c.resolveWith(g[0],g[1])}return this},resolveWith:function(a,c){if(!f&&!b&&!e){e=1;while(d[0])d.shift().apply(a,c);b=[a,c];e=0}return this},resolve:function(){c.resolveWith(a.isFunction(this.promise)?this.promise():this,arguments);return this},isResolved:function(){return!!(e||b)},cancel:function(){f=1;d=[];return this}};return c},Deferred:function(e){var b=a._Deferred(),c=a._Deferred(),d;a.extend(b,{then:function(a,c){b.done(a).fail(c);return this},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,promise:function(a,c){if(a==null){if(d)return d;d=a={}}c=m.length;while(c--)a[m[c]]=b[m[c]];return a}});b.then(c.cancel,b.cancel);delete b.cancel;e&&e.call(b,b);return b},when:function(d){var e,h=arguments,c=h.length,b=c<=1&&d&&a.isFunction(d.promise)?d:a.Deferred(),g=b.promise(),f;if(c>1){f=new Array(c);for(e=0;e<c;e++)a.when(h[e]).then(function(a){f[e]=arguments.length>1?u.call(arguments,0):a;!--c&&b.resolveWith(g,f)},b.reject)}else b!==d&&b.resolve(d);return g}});function v(f){var e=a.Deferred(),d=b.getElementsByTagName("head")[0]||b.documentElement,c=b.createElement("script");c.src=f.url;c.onload=c.onreadystatechange=function(){if(!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null;d&&c.parentNode&&d.removeChild(c);c=r;e.resolve()}};d.insertBefore(c,d.firstChild);return e}function s(){if(!b.body)return setTimeout(function(){s()},1);a.isReady=true;i(true)}s()}function g(b,a){if(a.indexOf("://")===-1)a=b+a;t.href=a;return t.href.toLowerCase()}function p(a){return a.slice(0,a.lastIndexOf("/")+1)}function l(a){return typeof a==="string"?[a]:a}function q(a,e){if(!a)return 0;a=l(a);var b,d=a.length;while(d--){b=a[d];if(!c[b])a[d]=g(e,b)}return a}function d(d,a){var b=c[d];if(b)return b;a=g(p(a||""),d);return e[a]||(e[a]={url:a})}a.extend({defer:function(K,e,L){e=e||{};var z,E,g,h,w,G=0,B=e.delayDomReady||k.delayDomReady,N=e.min||k.min,b=d(K,L),r=b.url,M=N&&b.minUrl||b.url,s=a.extend(b,e),t=s.bare,f=s.contains,H=s.loaded,p=s.depends,F=s.multiple,u=b.prntPrms,m=b.promise,I,O,x,C;function J(){var c,k=I||b.runCb;if(!G--){if(!g.isRejected()){if(u)g.resolve(h||(b.result=h=k.call(m,a,e)));else if(f){j=[];k.call(m,a,e);c=f.length;while(c--)d(f[c],r).runCb=j[c].run;j=0;x.resolve();q(f,[],function(){c=f.length;h=[];while(c--)h.push(d(f[c],r).result);g.resolve(h)})}else g.resolve(h||(b.result=h=t?"bare":k.call(m,a,e)));h=F?0:h}B&&i(true)}}function y(){g.reject("fail",r)}function q(d,b,g){b=b||[];var f=d&&d.length;while(f--)b.push(c(d[f],e,r));a.when.apply(a,b).fail(y).done(g||J)}function D(){return(a.ajax||v)({url:M,dataType:"script",timeout:e.timeout,cache:!e.noCache,crossDomain:true}).fail(y).done(function(){var d=t?0:o.shift();if(!d){!t&&y();if(jQuery&&a!==jQuery)a=jQuery.extend({defer:c,deferSettings:k,deferDef:n});J();return}I=b.runCb=d.run;d.def&&n(d.def,r);p=l(d.depends)||[];A(!f&&d.contains);if(p.length){G++;q(p)}})}function A(b){if(b){x=a.Deferred();C=[x.promise()];f=l(b);z=f.length;while(z--)d(f[z],r).prntPrms=C}}if(F||!m){g=a.Deferred();if(H&&eval(H))return g.resolve().promise();if(B)a.readyWait++;w=m;g=a.Deferred();m=b.promise=g.promise();if(t)q(p,0,D);else if(w)q(p,[w]);else if(u)q(p,u);else{A(f);q(p,[D().promise()])}}if(E=e.readyName||b.name)i[E]=m;return m},deferDef:function(f,m){var i,h,j,k=b.getElementsByTagName("script");function l(f,b){if(typeof b==="string")b={url:b};var j=b.minUrl,i=g(h,b.url),d=e[i]||function(){var b=u.call(arguments,0);b.unshift(f);return c.apply(a,b)};b.url=i;if(j)b.minUrl=g(h,j);a.extend(d,b);e[i]=c[f]=d;d.name=f}k=k[k.length-1];h=p(m||k.src);if(typeof f==="string")return c[f]||e[g(h,f)];for(i in f)l(i,f[i]);for(i in f){j=d(i);j.depends=q(j.depends,h);j.contains=q(j.contains,h)}},deferSettings:{delayDomReady:false,min:true}});h.$deferRun=function(b,a){a=l(a);a=a&&a.length?{depends:a}:a||{};a.run=b;(j||o).push(a)};k=a.deferSettings;c=a.defer;n=a.deferDef;i=a.ready;f=a.Deferred();f.promise(i)}(window);